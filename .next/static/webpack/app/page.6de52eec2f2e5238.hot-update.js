"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/components/providers/FirestoreSyncProvider.tsx":
/*!************************************************************!*\
  !*** ./src/components/providers/FirestoreSyncProvider.tsx ***!
  \************************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirestoreContext: function() { return /* binding */ FirestoreContext; },\n/* harmony export */   FirestoreSyncProvider: function() { return /* binding */ FirestoreSyncProvider; },\n/* harmony export */   useFirestore: function() { return /* binding */ useFirestore; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n/* __next_internal_client_entry_do_not_use__ FirestoreSyncProvider,useFirestore,FirestoreContext auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n// Create context\nconst FirestoreContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(undefined);\n// Provider component\nfunction FirestoreSyncProvider(param) {\n    let { children } = param;\n    _s();\n    const [competitors, setCompetitors] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [hourlyEntries, setHourlyEntries] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [bigCatches, setBigCatches] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [judges, setJudges] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [competitionSettings, setCompetitionSettings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [publicAppearanceSettings, setPublicAppearanceSettings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const unsubscribers = [];\n        let mounted = true;\n        try {\n            // Subscribe to competitors\n            const competitorsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitors\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"boxNumber\", \"asc\"));\n            const unsubCompetitors = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(competitorsQuery, (snapshot)=>{\n                if (!mounted) return;\n                const data = snapshot.docs.map((doc)=>({\n                        id: doc.id,\n                        ...doc.data()\n                    }));\n                setCompetitors(data);\n            }, (error)=>{\n                console.error(\"Error fetching competitors:\", error);\n                if (mounted) {\n                    setError(error.message);\n                    setCompetitors([]);\n                }\n            });\n            unsubscribers.push(unsubCompetitors);\n            // Subscribe to hourly entries\n            const hourlyQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"hourly_entries\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"hour\", \"asc\"));\n            const unsubHourly = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(hourlyQuery, (snapshot)=>{\n                if (!mounted) return;\n                const data = snapshot.docs.map((doc)=>({\n                        id: doc.id,\n                        ...doc.data()\n                    }));\n                setHourlyEntries(data);\n            }, (error)=>{\n                console.error(\"Error fetching hourly entries:\", error);\n                if (mounted) {\n                    setError(error.message);\n                    setHourlyEntries([]);\n                }\n            });\n            unsubscribers.push(unsubHourly);\n            // Subscribe to big catches\n            const bigCatchesQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"big_catches\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"grossePrise\", \"desc\"));\n            const unsubBigCatches = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(bigCatchesQuery, (snapshot)=>{\n                if (!mounted) return;\n                const data = snapshot.docs.map((doc)=>({\n                        id: doc.id,\n                        ...doc.data()\n                    }));\n                setBigCatches(data);\n            }, (error)=>{\n                console.error(\"Error fetching big catches:\", error);\n                if (mounted) {\n                    setError(error.message);\n                    setBigCatches([]);\n                }\n            });\n            unsubscribers.push(unsubBigCatches);\n            // Subscribe to judges\n            const judgesQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"judges\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"name\", \"asc\"));\n            const unsubJudges = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(judgesQuery, (snapshot)=>{\n                if (!mounted) return;\n                const data = snapshot.docs.map((doc)=>({\n                        uid: doc.id,\n                        ...doc.data()\n                    }));\n                setJudges(data);\n            }, (error)=>{\n                console.error(\"Error fetching judges:\", error);\n                if (mounted) {\n                    setError(error.message);\n                    setJudges([]);\n                }\n            });\n            unsubscribers.push(unsubJudges);\n            // Subscribe to competition settings\n            const unsubSettings = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitionSettings\", \"main\"), (snapshot)=>{\n                if (!mounted) return;\n                if (snapshot.exists()) {\n                    setCompetitionSettings({\n                        id: snapshot.id,\n                        ...snapshot.data()\n                    });\n                } else {\n                    setCompetitionSettings(null);\n                }\n            }, (error)=>{\n                console.error(\"Error fetching competition settings:\", error);\n                if (mounted) {\n                    setError(error.message);\n                    setCompetitionSettings(null);\n                }\n            });\n            unsubscribers.push(unsubSettings);\n            // Subscribe to public appearance settings\n            const unsubAppearance = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"publicAppearanceSettings\", \"main\"), (snapshot)=>{\n                if (!mounted) return;\n                if (snapshot.exists()) {\n                    setPublicAppearanceSettings({\n                        id: snapshot.id,\n                        ...snapshot.data()\n                    });\n                } else {\n                    setPublicAppearanceSettings(null);\n                }\n            }, (error)=>{\n                console.error(\"Error fetching public appearance settings:\", error);\n                if (mounted) {\n                    setError(error.message);\n                    setPublicAppearanceSettings(null);\n                }\n            });\n            unsubscribers.push(unsubAppearance);\n            if (mounted) {\n                setLoading(false);\n            }\n        } catch (err) {\n            console.error(\"Error setting up Firestore subscriptions:\", err);\n            if (mounted) {\n                setError(err instanceof Error ? err.message : \"Unknown error\");\n                setLoading(false);\n            }\n        }\n        // Cleanup\n        return ()=>{\n            mounted = false;\n            unsubscribers.forEach((unsub)=>unsub());\n        };\n    }, []);\n    // Save functions\n    const saveCompetitor = async (data)=>{\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitors\", data.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(docRef, {\n                ...data,\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now()\n            }, {\n                merge: true\n            });\n        } catch (err) {\n            console.error(\"Error saving competitor:\", err);\n            throw err;\n        }\n    };\n    const deleteCompetitor = async (id)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitors\", id));\n        } catch (err) {\n            console.error(\"Error deleting competitor:\", err);\n            throw err;\n        }\n    };\n    const saveHourlyEntry = async (data)=>{\n        try {\n            console.log(\"Saving hourly entry to Firebase:\", data);\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"hourly_entries\", data.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(docRef, {\n                ...data,\n                createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now(),\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now()\n            }, {\n                merge: true\n            });\n            console.log(\"Hourly entry saved successfully to Firebase\");\n            // Auto-calculate competitor totals after saving hourly entry\n            await recalculateCompetitorTotals(data.competitorId);\n        } catch (err) {\n            console.error(\"Error saving hourly entry:\", err);\n            throw err;\n        }\n    };\n    const saveBigCatch = async (data)=>{\n        try {\n            console.log(\"Saving big catch to Firebase:\", data);\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"big_catches\", data.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(docRef, {\n                ...data,\n                createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now(),\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now()\n            }, {\n                merge: true\n            });\n            console.log(\"Big catch saved successfully to Firebase\");\n            // Auto-calculate competitor totals after saving big catch\n            await recalculateCompetitorTotals(data.competitorId);\n        } catch (err) {\n            console.error(\"Error saving big catch:\", err);\n            throw err;\n        }\n    };\n    const saveJudge = async (data)=>{\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"judges\", data.uid);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(docRef, {\n                ...data,\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now()\n            }, {\n                merge: true\n            });\n        } catch (err) {\n            console.error(\"Error saving judge:\", err);\n            throw err;\n        }\n    };\n    const deleteJudge = async (uid)=>{\n        try {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.deleteDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"judges\", uid));\n        } catch (err) {\n            console.error(\"Error deleting judge:\", err);\n            throw err;\n        }\n    };\n    const saveCompetitionSettings = async (data)=>{\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitionSettings\", \"main\");\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(docRef, {\n                ...data,\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now()\n            }, {\n                merge: true\n            });\n        } catch (err) {\n            console.error(\"Error saving competition settings:\", err);\n            throw err;\n        }\n    };\n    const savePublicAppearanceSettings = async (data)=>{\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"publicAppearanceSettings\", \"main\");\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(docRef, {\n                ...data,\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now()\n            }, {\n                merge: true\n            });\n        } catch (err) {\n            console.error(\"Error saving public appearance settings:\", err);\n            throw err;\n        }\n    };\n    // Auto-calculation function\n    const recalculateCompetitorTotals = async (competitorId)=>{\n        try {\n            // Get competitor info first\n            const competitorDoc = competitors.find((c)=>c.id === competitorId);\n            if (!competitorDoc) return;\n            const sector = competitorDoc.sector;\n            // Get all hourly entries for this competitor\n            const hourlyEntriesSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"hourly_entries\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"competitorId\", \"==\", competitorId)));\n            // Calculate totals\n            let nbPrisesGlobal = 0;\n            let poidsTotalGlobal = 0;\n            hourlyEntriesSnapshot.docs.forEach((doc)=>{\n                const entry = doc.data();\n                if ([\n                    \"locked_judge\",\n                    \"locked_admin\",\n                    \"offline_judge\",\n                    \"offline_admin\"\n                ].includes(entry.status)) {\n                    nbPrisesGlobal += entry.fishCount || 0;\n                    poidsTotalGlobal += entry.totalWeight || 0;\n                }\n            });\n            // Get grosse prise\n            const bigCatchSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"big_catches\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"competitorId\", \"==\", competitorId)));\n            let grossePrise = 0;\n            if (!bigCatchSnapshot.empty) {\n                const bigCatchData = bigCatchSnapshot.docs[0].data();\n                if ([\n                    \"locked_judge\",\n                    \"locked_admin\",\n                    \"offline_judge\",\n                    \"offline_admin\"\n                ].includes(bigCatchData.status)) {\n                    grossePrise = bigCatchData.grossePrise || 0;\n                }\n            }\n            // Calculate points\n            const points = nbPrisesGlobal * 50 + poidsTotalGlobal;\n            // Calculate coefficientSecteur\n            // First, get all competitors in the same sector to calculate sector total\n            const sectorCompetitorsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitors\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"sector\", \"==\", sector)));\n            let sectorTotalNbPrises = 0;\n            // Calculate sector total from all competitors in this sector\n            for (const sectorCompDoc of sectorCompetitorsSnapshot.docs){\n                const sectorCompId = sectorCompDoc.id;\n                // Get hourly entries for this sector competitor\n                const sectorHourlySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"hourly_entries\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"competitorId\", \"==\", sectorCompId)));\n                let compNbPrises = 0;\n                sectorHourlySnapshot.docs.forEach((doc)=>{\n                    const entry = doc.data();\n                    if ([\n                        \"locked_judge\",\n                        \"locked_admin\",\n                        \"offline_judge\",\n                        \"offline_admin\"\n                    ].includes(entry.status)) {\n                        compNbPrises += entry.fishCount || 0;\n                    }\n                });\n                sectorTotalNbPrises += compNbPrises;\n            }\n            // Calculate coefficient: (Points × Nb Prises global) / Total Nb Prises global Secteur\n            let coefficientSecteur = 0;\n            if (sectorTotalNbPrises > 0) {\n                coefficientSecteur = points * nbPrisesGlobal / sectorTotalNbPrises;\n            }\n            // Update competitor document with coefficient\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitors\", competitorId), {\n                nbPrisesGlobal,\n                poidsTotalGlobal,\n                grossePrise,\n                points,\n                coefficientSecteur,\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now()\n            });\n            // Also recalculate coefficients for all other competitors in the same sector\n            // since the sector total has changed\n            setTimeout(async ()=>{\n                try {\n                    for (const sectorCompDoc of sectorCompetitorsSnapshot.docs){\n                        const otherCompId = sectorCompDoc.id;\n                        if (otherCompId !== competitorId) {\n                            await recalculateCompetitorCoefficient(otherCompId, sector, sectorTotalNbPrises);\n                        }\n                    }\n                } catch (error) {\n                    console.error(\"Error recalculating sector coefficients:\", error);\n                }\n            }, 1000);\n        } catch (error) {\n            console.error(\"Error auto-calculating competitor totals:\", error);\n        }\n    };\n    // Helper function to recalculate coefficient for a specific competitor\n    const recalculateCompetitorCoefficient = async (competitorId, sector, sectorTotalNbPrises)=>{\n        try {\n            // Get competitor's current data\n            const competitorSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitors\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"__name__\", \"==\", competitorId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(1)));\n            if (competitorSnapshot.empty) return;\n            const competitorData = competitorSnapshot.docs[0].data();\n            const points = competitorData.points || 0;\n            const nbPrisesGlobal = competitorData.nbPrisesGlobal || 0;\n            // Calculate new coefficient\n            let coefficientSecteur = 0;\n            if (sectorTotalNbPrises > 0) {\n                coefficientSecteur = points * nbPrisesGlobal / sectorTotalNbPrises;\n            }\n            // Update only the coefficient\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(_lib_firebase__WEBPACK_IMPORTED_MODULE_3__.db, \"competitors\", competitorId), {\n                coefficientSecteur,\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.Timestamp.now()\n            });\n        } catch (error) {\n            console.error(\"Error updating coefficient for \".concat(competitorId, \":\"), error);\n        }\n    };\n    const value = {\n        competitors,\n        hourlyEntries,\n        bigCatches,\n        judges,\n        competitionSettings,\n        publicAppearanceSettings,\n        saveCompetitor,\n        deleteCompetitor,\n        saveHourlyEntry,\n        saveBigCatch,\n        saveJudge,\n        deleteJudge,\n        saveCompetitionSettings,\n        savePublicAppearanceSettings,\n        loading,\n        error\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FirestoreContext.Provider, {\n        value: value,\n        children: children\n    }, void 0, false, {\n        fileName: \"/home/project/src/components/providers/FirestoreSyncProvider.tsx\",\n        lineNumber: 602,\n        columnNumber: 5\n    }, this);\n}\n_s(FirestoreSyncProvider, \"TNwIguAWOC/AJrPoCbJXJW9iBGc=\");\n_c = FirestoreSyncProvider;\n// Custom hook - CRITICAL: This export is required!\nfunction useFirestore() {\n    _s1();\n    const context = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(FirestoreContext);\n    if (context === undefined) {\n        throw new Error(\"useFirestore must be used within a FirestoreSyncProvider\");\n    }\n    return context;\n}\n_s1(useFirestore, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n// Export the context for advanced usage\n\nvar _c;\n$RefreshReg$(_c, \"FirestoreSyncProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL3Byb3ZpZGVycy9GaXJlc3RvcmVTeW5jUHJvdmlkZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFFOEU7QUFjbEQ7QUFDUTtBQWlJcEMsaUJBQWlCO0FBQ2pCLE1BQU1rQixpQ0FBbUJqQixvREFBYUEsQ0FBbUNrQjtBQUV6RSxxQkFBcUI7QUFDZCxTQUFTQyxzQkFBc0IsS0FBMkM7UUFBM0MsRUFBRUMsUUFBUSxFQUFpQyxHQUEzQzs7SUFDcEMsTUFBTSxDQUFDQyxhQUFhQyxlQUFlLEdBQUduQiwrQ0FBUUEsQ0FBa0IsRUFBRTtJQUNsRSxNQUFNLENBQUNvQixlQUFlQyxpQkFBaUIsR0FBR3JCLCtDQUFRQSxDQUFtQixFQUFFO0lBQ3ZFLE1BQU0sQ0FBQ3NCLFlBQVlDLGNBQWMsR0FBR3ZCLCtDQUFRQSxDQUFnQixFQUFFO0lBQzlELE1BQU0sQ0FBQ3dCLFFBQVFDLFVBQVUsR0FBR3pCLCtDQUFRQSxDQUFhLEVBQUU7SUFDbkQsTUFBTSxDQUFDMEIscUJBQXFCQyx1QkFBdUIsR0FBRzNCLCtDQUFRQSxDQUFnQztJQUM5RixNQUFNLENBQUM0QiwwQkFBMEJDLDRCQUE0QixHQUFHN0IsK0NBQVFBLENBQXFDO0lBQzdHLE1BQU0sQ0FBQzhCLFNBQVNDLFdBQVcsR0FBRy9CLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ2dDLE9BQU9DLFNBQVMsR0FBR2pDLCtDQUFRQSxDQUFnQjtJQUVsREQsZ0RBQVNBLENBQUM7UUFDUixNQUFNbUMsZ0JBQWdDLEVBQUU7UUFDeEMsSUFBSUMsVUFBVTtRQUVkLElBQUk7WUFDRiwyQkFBMkI7WUFDM0IsTUFBTUMsbUJBQW1COUIseURBQUtBLENBQzVCTCw4REFBVUEsQ0FBQ1ksNkNBQUVBLEVBQUUsZ0JBQ2ZOLDJEQUFPQSxDQUFDLGFBQWE7WUFHdkIsTUFBTThCLG1CQUFtQm5DLDhEQUFVQSxDQUNqQ2tDLGtCQUNBLENBQUNFO2dCQUNDLElBQUks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WUFBWTdGLFdBQVc7UUFDekIsTUFBTSxJQUFJMEMsTUFBTTtJQUNsQjtJQUNBLE9BQU9tRDtBQUNUO0lBTmdCRDtBQVFoQix3Q0FBd0M7QUFDWiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29tcG9uZW50cy9wcm92aWRlcnMvRmlyZXN0b3JlU3luY1Byb3ZpZGVyLnRzeD8zZmFlIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBcbiAgY29sbGVjdGlvbiwgXG4gIG9uU25hcHNob3QsIFxuICBkb2MsIFxuICBzZXREb2MsIFxuICBkZWxldGVEb2MsXG4gIHF1ZXJ5LCBcbiAgb3JkZXJCeSxcbiAgd2hlcmUsXG4gIGdldERvY3MsXG4gIHVwZGF0ZURvYyxcbiAgVGltZXN0YW1wLFxuICBsaW1pdFxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICdAL2xpYi9maXJlYmFzZSc7XG5cbi8vIFR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIENvbXBldGl0b3JEb2Mge1xuICBpZDogc3RyaW5nO1xuICBzZWN0b3I6IHN0cmluZztcbiAgYm94TnVtYmVyOiBudW1iZXI7XG4gIGJveENvZGU6IHN0cmluZztcbiAgZnVsbE5hbWU6IHN0cmluZztcbiAgZXF1aXBlOiBzdHJpbmc7XG4gIHBob3RvOiBzdHJpbmc7XG4gIHN0YXR1czogJ2FjdGl2ZScgfCAnaW5hY3RpdmUnO1xuICAvLyBDaGFtcHMgY2FsY3Vsw6lzXG4gIG5iUHJpc2VzR2xvYmFsPzogbnVtYmVyOyAgICAgICAvLyBTb21tZSBmaXNoQ291bnQgSDEtSDdcbiAgIHBvaWRzVG90YWxHbG9iYWw/OiBudW1iZXI7ICAgICAvLyBTb21tZSB0b3RhbFdlaWdodCBIMS1IN1xuICBncm9zc2VQcmlzZT86IG51bWJlcjtcbiAgcG9pbnRzPzogbnVtYmVyO1xuICBjb2VmZmljaWVudFNlY3RldXI/OiBudW1iZXI7XG4gIGNsYXNzZW1lbnRTZWN0ZXVyPzogbnVtYmVyO1xuICBjcmVhdGVkQXQ/OiBUaW1lc3RhbXA7XG4gIHVwZGF0ZWRBdD86IFRpbWVzdGFtcDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIb3VybHlFbnRyeURvYyB7XG4gIGlkOiBzdHJpbmc7XG4gIHNlY3Rvcjogc3RyaW5nO1xuICBjb21wZXRpdG9ySWQ6IHN0cmluZztcbiAgYm94TnVtYmVyOiBudW1iZXI7XG4gIGhvdXI6IG51bWJlcjtcbiAgZmlzaENvdW50OiBudW1iZXI7XG4gIHRvdGFsV2VpZ2h0OiBudW1iZXI7XG4gIHN0YXR1czogJ2VtcHR5JyB8ICdpbl9wcm9ncmVzcycgfCAnbG9ja2VkX2p1ZGdlJyB8ICdsb2NrZWRfYWRtaW4nIHwgJ29mZmxpbmVfanVkZ2UnIHwgJ29mZmxpbmVfYWRtaW4nIHwgJ2Vycm9yJztcbiAgc291cmNlOiAnSnVkZ2UnIHwgJ0FkbWluJztcbiAgdXBkYXRlZEJ5Pzogc3RyaW5nO1xuICB0aW1lc3RhbXA/OiBUaW1lc3RhbXA7XG4gIGNyZWF0ZWRBdD86IFRpbWVzdGFtcDtcbiAgdXBkYXRlZEF0PzogVGltZXN0YW1wO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NhdGNoRG9jIHtcbiAgaWQ6IHN0cmluZztcbiAgc2VjdG9yOiBzdHJpbmc7XG4gIGNvbXBldGl0b3JJZDogc3RyaW5nO1xuICBib3hOdW1iZXI6IG51bWJlcjtcbiAgZ3Jvc3NlUHJpc2U6IG51bWJlcjtcbiAgc3RhdHVzOiAnZW1wdHknIHwgJ2luX3Byb2dyZXNzJyB8ICdsb2NrZWRfanVkZ2UnIHwgJ2xvY2tlZF9hZG1pbicgfCAnb2ZmbGluZV9qdWRnZScgfCAnb2ZmbGluZV9hZG1pbicgfCAnZXJyb3InO1xuICBzb3VyY2U6ICdKdWRnZScgfCAnQWRtaW4nO1xuICB1cGRhdGVkQnk/OiBzdHJpbmc7XG4gIHRpbWVzdGFtcD86IFRpbWVzdGFtcDtcbiAgY3JlYXRlZEF0PzogVGltZXN0YW1wO1xuICB1cGRhdGVkQXQ/OiBUaW1lc3RhbXA7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSnVkZ2VEb2Mge1xuICB1aWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICByb2xlOiAnYWRtaW4nIHwgJ2p1ZGdlJztcbiAgc2VjdG9yOiBzdHJpbmcgfCBudWxsO1xuICBzdGF0dXM6ICdhY3RpdmUnIHwgJ2luYWN0aXZlJztcbiAgY3JlYXRlZEF0PzogVGltZXN0YW1wO1xuICB1cGRhdGVkQXQ/OiBUaW1lc3RhbXA7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGV0aXRpb25TZXR0aW5nc0RvYyB7XG4gIGlkOiBzdHJpbmc7XG4gIHN0YXJ0RGF0ZVRpbWU6IHN0cmluZztcbiAgZW5kRGF0ZVRpbWU6IHN0cmluZztcbiAgc3RhdHVzOiAndXBjb21pbmcnIHwgJ2FjdGl2ZScgfCAnY29tcGxldGVkJztcbiAgY3VycmVudEhvdXI6IG51bWJlcjtcbiAgc291bmRFbmFibGVkOiBib29sZWFuO1xuICB1cGRhdGVkQXQ/OiBUaW1lc3RhbXA7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHVibGljQXBwZWFyYW5jZVNldHRpbmdzRG9jIHtcbiAgaWQ6IHN0cmluZztcbiAgbG9nb3M6IHtcbiAgICBsaWdodDogc3RyaW5nO1xuICAgIGRhcms6IHN0cmluZztcbiAgfTtcbiAgc3BvbnNvcnM6IEFycmF5PHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBsb2dvOiBzdHJpbmc7XG4gICAgdGllcjogJ3RpdGxlJyB8ICdnb2xkJyB8ICdzaWx2ZXInIHwgJ2Jyb256ZSc7XG4gIH0+O1xuICBzb2NpYWxMaW5rczoge1xuICAgIHlvdXR1YmU6IHN0cmluZztcbiAgICBmYWNlYm9vazogc3RyaW5nO1xuICAgIGluc3RhZ3JhbTogc3RyaW5nO1xuICAgIHdlYnNpdGU6IHN0cmluZztcbiAgfTtcbiAgZm9vdGVyVGV4dDogc3RyaW5nO1xuICBzdHJlYW1EZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzdHJlYW1Vcmw6IHN0cmluZztcbiAgdXBkYXRlZEF0PzogVGltZXN0YW1wO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1ZGl0TG9nRG9jIHtcbiAgaWQ6IHN0cmluZztcbiAgYWN0aW9uOiBzdHJpbmc7XG4gIGRldGFpbHM6IHN0cmluZztcbiAgdXNlcklkPzogc3RyaW5nO1xuICB1c2VybmFtZT86IHN0cmluZztcbiAgbWV0YWRhdGE/OiBhbnk7XG4gIHRpbWVzdGFtcDogVGltZXN0YW1wO1xufVxuXG4vLyBDb250ZXh0IHR5cGVcbmV4cG9ydCBpbnRlcmZhY2UgRmlyZXN0b3JlQ29udGV4dFR5cGUge1xuICBjb21wZXRpdG9yczogQ29tcGV0aXRvckRvY1tdO1xuICBob3VybHlFbnRyaWVzOiBIb3VybHlFbnRyeURvY1tdO1xuICBiaWdDYXRjaGVzOiBCaWdDYXRjaERvY1tdO1xuICBqdWRnZXM6IEp1ZGdlRG9jW107XG4gIGNvbXBldGl0aW9uU2V0dGluZ3M6IENvbXBldGl0aW9uU2V0dGluZ3NEb2MgfCBudWxsO1xuICBwdWJsaWNBcHBlYXJhbmNlU2V0dGluZ3M6IFB1YmxpY0FwcGVhcmFuY2VTZXR0aW5nc0RvYyB8IG51bGw7XG4gIHNhdmVDb21wZXRpdG9yOiAoZGF0YTogT21pdDxDb21wZXRpdG9yRG9jLCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPikgPT4gUHJvbWlzZTx2b2lkPjtcbiAgZGVsZXRlQ29tcGV0aXRvcjogKGlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHNhdmVIb3VybHlFbnRyeTogKGRhdGE6IE9taXQ8SG91cmx5RW50cnlEb2MsICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KSA9PiBQcm9taXNlPHZvaWQ+O1xuICBzYXZlQmlnQ2F0Y2g6IChkYXRhOiBPbWl0PEJpZ0NhdGNoRG9jLCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPikgPT4gUHJvbWlzZTx2b2lkPjtcbiAgc2F2ZUp1ZGdlOiAoZGF0YTogT21pdDxKdWRnZURvYywgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pID0+IFByb21pc2U8dm9pZD47XG4gIGRlbGV0ZUp1ZGdlOiAodWlkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHNhdmVDb21wZXRpdGlvblNldHRpbmdzOiAoZGF0YTogT21pdDxDb21wZXRpdGlvblNldHRpbmdzRG9jLCAndXBkYXRlZEF0Jz4pID0+IFByb21pc2U8dm9pZD47XG4gIHNhdmVQdWJsaWNBcHBlYXJhbmNlU2V0dGluZ3M6IChkYXRhOiBPbWl0PFB1YmxpY0FwcGVhcmFuY2VTZXR0aW5nc0RvYywgJ3VwZGF0ZWRBdCc+KSA9PiBQcm9taXNlPHZvaWQ+O1xuICBsb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbn1cblxuLy8gQ3JlYXRlIGNvbnRleHRcbmNvbnN0IEZpcmVzdG9yZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0PEZpcmVzdG9yZUNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG4vLyBQcm92aWRlciBjb21wb25lbnRcbmV4cG9ydCBmdW5jdGlvbiBGaXJlc3RvcmVTeW5jUHJvdmlkZXIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuICBjb25zdCBbY29tcGV0aXRvcnMsIHNldENvbXBldGl0b3JzXSA9IHVzZVN0YXRlPENvbXBldGl0b3JEb2NbXT4oW10pO1xuICBjb25zdCBbaG91cmx5RW50cmllcywgc2V0SG91cmx5RW50cmllc10gPSB1c2VTdGF0ZTxIb3VybHlFbnRyeURvY1tdPihbXSk7XG4gIGNvbnN0IFtiaWdDYXRjaGVzLCBzZXRCaWdDYXRjaGVzXSA9IHVzZVN0YXRlPEJpZ0NhdGNoRG9jW10+KFtdKTtcbiAgY29uc3QgW2p1ZGdlcywgc2V0SnVkZ2VzXSA9IHVzZVN0YXRlPEp1ZGdlRG9jW10+KFtdKTtcbiAgY29uc3QgW2NvbXBldGl0aW9uU2V0dGluZ3MsIHNldENvbXBldGl0aW9uU2V0dGluZ3NdID0gdXNlU3RhdGU8Q29tcGV0aXRpb25TZXR0aW5nc0RvYyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcHVibGljQXBwZWFyYW5jZVNldHRpbmdzLCBzZXRQdWJsaWNBcHBlYXJhbmNlU2V0dGluZ3NdID0gdXNlU3RhdGU8UHVibGljQXBwZWFyYW5jZVNldHRpbmdzRG9jIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdW5zdWJzY3JpYmVyczogKCgpID0+IHZvaWQpW10gPSBbXTtcbiAgICBsZXQgbW91bnRlZCA9IHRydWU7XG5cbiAgICB0cnkge1xuICAgICAgLy8gU3Vic2NyaWJlIHRvIGNvbXBldGl0b3JzXG4gICAgICBjb25zdCBjb21wZXRpdG9yc1F1ZXJ5ID0gcXVlcnkoXG4gICAgICAgIGNvbGxlY3Rpb24oZGIsICdjb21wZXRpdG9ycycpLFxuICAgICAgICBvcmRlckJ5KCdib3hOdW1iZXInLCAnYXNjJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHVuc3ViQ29tcGV0aXRvcnMgPSBvblNuYXBzaG90KFxuICAgICAgICBjb21wZXRpdG9yc1F1ZXJ5LFxuICAgICAgICAoc25hcHNob3QpID0+IHtcbiAgICAgICAgICBpZiAoIW1vdW50ZWQpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBkYXRhID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICAgIH0gYXMgQ29tcGV0aXRvckRvYykpO1xuICAgICAgICAgIHNldENvbXBldGl0b3JzKGRhdGEpO1xuICAgICAgICB9LFxuICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb21wZXRpdG9yczonLCBlcnJvcik7XG4gICAgICAgICAgaWYgKG1vdW50ZWQpIHtcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgc2V0Q29tcGV0aXRvcnMoW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHVuc3Vic2NyaWJlcnMucHVzaCh1bnN1YkNvbXBldGl0b3JzKTtcblxuICAgICAgLy8gU3Vic2NyaWJlIHRvIGhvdXJseSBlbnRyaWVzXG4gICAgICBjb25zdCBob3VybHlRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICBjb2xsZWN0aW9uKGRiLCAnaG91cmx5X2VudHJpZXMnKSxcbiAgICAgICAgb3JkZXJCeSgnaG91cicsICdhc2MnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgdW5zdWJIb3VybHkgPSBvblNuYXBzaG90KFxuICAgICAgICBob3VybHlRdWVyeSxcbiAgICAgICAgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoe1xuICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgICB9IGFzIEhvdXJseUVudHJ5RG9jKSk7XG4gICAgICAgICAgc2V0SG91cmx5RW50cmllcyhkYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaG91cmx5IGVudHJpZXM6JywgZXJyb3IpO1xuICAgICAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHNldEhvdXJseUVudHJpZXMoW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHVuc3Vic2NyaWJlcnMucHVzaCh1bnN1YkhvdXJseSk7XG5cbiAgICAgIC8vIFN1YnNjcmliZSB0byBiaWcgY2F0Y2hlc1xuICAgICAgY29uc3QgYmlnQ2F0Y2hlc1F1ZXJ5ID0gcXVlcnkoXG4gICAgICAgIGNvbGxlY3Rpb24oZGIsICdiaWdfY2F0Y2hlcycpLFxuICAgICAgICBvcmRlckJ5KCdncm9zc2VQcmlzZScsICdkZXNjJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHVuc3ViQmlnQ2F0Y2hlcyA9IG9uU25hcHNob3QoXG4gICAgICAgIGJpZ0NhdGNoZXNRdWVyeSxcbiAgICAgICAgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoe1xuICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgICB9IGFzIEJpZ0NhdGNoRG9jKSk7XG4gICAgICAgICAgc2V0QmlnQ2F0Y2hlcyhkYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYmlnIGNhdGNoZXM6JywgZXJyb3IpO1xuICAgICAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIHNldEJpZ0NhdGNoZXMoW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHVuc3Vic2NyaWJlcnMucHVzaCh1bnN1YkJpZ0NhdGNoZXMpO1xuXG4gICAgICAvLyBTdWJzY3JpYmUgdG8ganVkZ2VzXG4gICAgICBjb25zdCBqdWRnZXNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICBjb2xsZWN0aW9uKGRiLCAnanVkZ2VzJyksXG4gICAgICAgIG9yZGVyQnkoJ25hbWUnLCAnYXNjJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHVuc3ViSnVkZ2VzID0gb25TbmFwc2hvdChcbiAgICAgICAganVkZ2VzUXVlcnksXG4gICAgICAgIChzbmFwc2hvdCkgPT4ge1xuICAgICAgICAgIGlmICghbW91bnRlZCkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHtcbiAgICAgICAgICAgIHVpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICAgIH0gYXMgSnVkZ2VEb2MpKTtcbiAgICAgICAgICBzZXRKdWRnZXMoZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGp1ZGdlczonLCBlcnJvcik7XG4gICAgICAgICAgaWYgKG1vdW50ZWQpIHtcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgc2V0SnVkZ2VzKFtdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB1bnN1YnNjcmliZXJzLnB1c2godW5zdWJKdWRnZXMpO1xuXG4gICAgICAvLyBTdWJzY3JpYmUgdG8gY29tcGV0aXRpb24gc2V0dGluZ3NcbiAgICAgIGNvbnN0IHVuc3ViU2V0dGluZ3MgPSBvblNuYXBzaG90KFxuICAgICAgICBkb2MoZGIsICdjb21wZXRpdGlvblNldHRpbmdzJywgJ21haW4nKSxcbiAgICAgICAgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XG4gICAgICAgICAgICBzZXRDb21wZXRpdGlvblNldHRpbmdzKHtcbiAgICAgICAgICAgICAgaWQ6IHNuYXBzaG90LmlkLFxuICAgICAgICAgICAgICAuLi5zbmFwc2hvdC5kYXRhKClcbiAgICAgICAgICAgIH0gYXMgQ29tcGV0aXRpb25TZXR0aW5nc0RvYyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldENvbXBldGl0aW9uU2V0dGluZ3MobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb21wZXRpdGlvbiBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgICAgICAgaWYgKG1vdW50ZWQpIHtcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgc2V0Q29tcGV0aXRpb25TZXR0aW5ncyhudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB1bnN1YnNjcmliZXJzLnB1c2godW5zdWJTZXR0aW5ncyk7XG5cbiAgICAgIC8vIFN1YnNjcmliZSB0byBwdWJsaWMgYXBwZWFyYW5jZSBzZXR0aW5nc1xuICAgICAgY29uc3QgdW5zdWJBcHBlYXJhbmNlID0gb25TbmFwc2hvdChcbiAgICAgICAgZG9jKGRiLCAncHVibGljQXBwZWFyYW5jZVNldHRpbmdzJywgJ21haW4nKSxcbiAgICAgICAgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgaWYgKCFtb3VudGVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XG4gICAgICAgICAgICBzZXRQdWJsaWNBcHBlYXJhbmNlU2V0dGluZ3Moe1xuICAgICAgICAgICAgICBpZDogc25hcHNob3QuaWQsXG4gICAgICAgICAgICAgIC4uLnNuYXBzaG90LmRhdGEoKVxuICAgICAgICAgICAgfSBhcyBQdWJsaWNBcHBlYXJhbmNlU2V0dGluZ3NEb2MpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRQdWJsaWNBcHBlYXJhbmNlU2V0dGluZ3MobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwdWJsaWMgYXBwZWFyYW5jZSBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgICAgICAgaWYgKG1vdW50ZWQpIHtcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgc2V0UHVibGljQXBwZWFyYW5jZVNldHRpbmdzKG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHVuc3Vic2NyaWJlcnMucHVzaCh1bnN1YkFwcGVhcmFuY2UpO1xuXG4gICAgICBpZiAobW91bnRlZCkge1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgRmlyZXN0b3JlIHN1YnNjcmlwdGlvbnM6JywgZXJyKTtcbiAgICAgIGlmIChtb3VudGVkKSB7XG4gICAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhbnVwXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG1vdW50ZWQgPSBmYWxzZTtcbiAgICAgIHVuc3Vic2NyaWJlcnMuZm9yRWFjaCh1bnN1YiA9PiB1bnN1YigpKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gU2F2ZSBmdW5jdGlvbnNcbiAgY29uc3Qgc2F2ZUNvbXBldGl0b3IgPSBhc3luYyAoZGF0YTogT21pdDxDb21wZXRpdG9yRG9jLCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICdjb21wZXRpdG9ycycsIGRhdGEuaWQpO1xuICAgICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKVxuICAgICAgfSwgeyBtZXJnZTogdHJ1ZSB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBjb21wZXRpdG9yOicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGRlbGV0ZUNvbXBldGl0b3IgPSBhc3luYyAoaWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnY29tcGV0aXRvcnMnLCBpZCkpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgY29tcGV0aXRvcjonLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzYXZlSG91cmx5RW50cnkgPSBhc3luYyAoZGF0YTogT21pdDxIb3VybHlFbnRyeURvYywgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1NhdmluZyBob3VybHkgZW50cnkgdG8gRmlyZWJhc2U6JywgZGF0YSk7XG4gICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICdob3VybHlfZW50cmllcycsIGRhdGEuaWQpO1xuICAgICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjcmVhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KClcbiAgICAgIH0sIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgICBjb25zb2xlLmxvZygnSG91cmx5IGVudHJ5IHNhdmVkIHN1Y2Nlc3NmdWxseSB0byBGaXJlYmFzZScpO1xuICAgICAgXG4gICAgICAvLyBBdXRvLWNhbGN1bGF0ZSBjb21wZXRpdG9yIHRvdGFscyBhZnRlciBzYXZpbmcgaG91cmx5IGVudHJ5XG4gICAgICBhd2FpdCByZWNhbGN1bGF0ZUNvbXBldGl0b3JUb3RhbHMoZGF0YS5jb21wZXRpdG9ySWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGhvdXJseSBlbnRyeTonLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzYXZlQmlnQ2F0Y2ggPSBhc3luYyAoZGF0YTogT21pdDxCaWdDYXRjaERvYywgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1NhdmluZyBiaWcgY2F0Y2ggdG8gRmlyZWJhc2U6JywgZGF0YSk7XG4gICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICdiaWdfY2F0Y2hlcycsIGRhdGEuaWQpO1xuICAgICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjcmVhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KClcbiAgICAgIH0sIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgICBjb25zb2xlLmxvZygnQmlnIGNhdGNoIHNhdmVkIHN1Y2Nlc3NmdWxseSB0byBGaXJlYmFzZScpO1xuICAgICAgXG4gICAgICAvLyBBdXRvLWNhbGN1bGF0ZSBjb21wZXRpdG9yIHRvdGFscyBhZnRlciBzYXZpbmcgYmlnIGNhdGNoXG4gICAgICBhd2FpdCByZWNhbGN1bGF0ZUNvbXBldGl0b3JUb3RhbHMoZGF0YS5jb21wZXRpdG9ySWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGJpZyBjYXRjaDonLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzYXZlSnVkZ2UgPSBhc3luYyAoZGF0YTogT21pdDxKdWRnZURvYywgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCAnanVkZ2VzJywgZGF0YS51aWQpO1xuICAgICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKVxuICAgICAgfSwgeyBtZXJnZTogdHJ1ZSB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBqdWRnZTonLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBkZWxldGVKdWRnZSA9IGFzeW5jICh1aWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkZWxldGVEb2MoZG9jKGRiLCAnanVkZ2VzJywgdWlkKSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBqdWRnZTonLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzYXZlQ29tcGV0aXRpb25TZXR0aW5ncyA9IGFzeW5jIChkYXRhOiBPbWl0PENvbXBldGl0aW9uU2V0dGluZ3NEb2MsICd1cGRhdGVkQXQnPikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICdjb21wZXRpdGlvblNldHRpbmdzJywgJ21haW4nKTtcbiAgICAgIGF3YWl0IHNldERvYyhkb2NSZWYsIHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KClcbiAgICAgIH0sIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgY29tcGV0aXRpb24gc2V0dGluZ3M6JywgZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2F2ZVB1YmxpY0FwcGVhcmFuY2VTZXR0aW5ncyA9IGFzeW5jIChkYXRhOiBPbWl0PFB1YmxpY0FwcGVhcmFuY2VTZXR0aW5nc0RvYywgJ3VwZGF0ZWRBdCc+KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYiwgJ3B1YmxpY0FwcGVhcmFuY2VTZXR0aW5ncycsICdtYWluJyk7XG4gICAgICBhd2FpdCBzZXREb2MoZG9jUmVmLCB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIHVwZGF0ZWRBdDogVGltZXN0YW1wLm5vdygpXG4gICAgICB9LCB7IG1lcmdlOiB0cnVlIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHB1YmxpYyBhcHBlYXJhbmNlIHNldHRpbmdzOicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIC8vIEF1dG8tY2FsY3VsYXRpb24gZnVuY3Rpb25cbiAgY29uc3QgcmVjYWxjdWxhdGVDb21wZXRpdG9yVG90YWxzID0gYXN5bmMgKGNvbXBldGl0b3JJZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBjb21wZXRpdG9yIGluZm8gZmlyc3RcbiAgICAgIGNvbnN0IGNvbXBldGl0b3JEb2MgPSBjb21wZXRpdG9ycy5maW5kKGMgPT4gYy5pZCA9PT0gY29tcGV0aXRvcklkKTtcbiAgICAgIGlmICghY29tcGV0aXRvckRvYykgcmV0dXJuO1xuICAgICAgXG4gICAgICBjb25zdCBzZWN0b3IgPSBjb21wZXRpdG9yRG9jLnNlY3RvcjtcbiAgICAgIFxuICAgICAgLy8gR2V0IGFsbCBob3VybHkgZW50cmllcyBmb3IgdGhpcyBjb21wZXRpdG9yXG4gICAgICBjb25zdCBob3VybHlFbnRyaWVzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKFxuICAgICAgICBxdWVyeShjb2xsZWN0aW9uKGRiLCAnaG91cmx5X2VudHJpZXMnKSwgd2hlcmUoJ2NvbXBldGl0b3JJZCcsICc9PScsIGNvbXBldGl0b3JJZCkpXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgdG90YWxzXG4gICAgICBsZXQgbmJQcmlzZXNHbG9iYWwgPSAwO1xuICAgICAgbGV0IHBvaWRzVG90YWxHbG9iYWwgPSAwO1xuICAgICAgXG4gICAgICBob3VybHlFbnRyaWVzU25hcHNob3QuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gZG9jLmRhdGEoKTtcbiAgICAgICAgaWYgKFsnbG9ja2VkX2p1ZGdlJywgJ2xvY2tlZF9hZG1pbicsICdvZmZsaW5lX2p1ZGdlJywgJ29mZmxpbmVfYWRtaW4nXS5pbmNsdWRlcyhlbnRyeS5zdGF0dXMpKSB7XG4gICAgICAgICAgbmJQcmlzZXNHbG9iYWwgKz0gZW50cnkuZmlzaENvdW50IHx8IDA7XG4gICAgICAgICAgcG9pZHNUb3RhbEdsb2JhbCArPSBlbnRyeS50b3RhbFdlaWdodCB8fCAwO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gR2V0IGdyb3NzZSBwcmlzZVxuICAgICAgY29uc3QgYmlnQ2F0Y2hTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoXG4gICAgICAgIHF1ZXJ5KGNvbGxlY3Rpb24oZGIsICdiaWdfY2F0Y2hlcycpLCB3aGVyZSgnY29tcGV0aXRvcklkJywgJz09JywgY29tcGV0aXRvcklkKSlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGxldCBncm9zc2VQcmlzZSA9IDA7XG4gICAgICBpZiAoIWJpZ0NhdGNoU25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgY29uc3QgYmlnQ2F0Y2hEYXRhID0gYmlnQ2F0Y2hTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcbiAgICAgICAgaWYgKFsnbG9ja2VkX2p1ZGdlJywgJ2xvY2tlZF9hZG1pbicsICdvZmZsaW5lX2p1ZGdlJywgJ29mZmxpbmVfYWRtaW4nXS5pbmNsdWRlcyhiaWdDYXRjaERhdGEuc3RhdHVzKSkge1xuICAgICAgICAgIGdyb3NzZVByaXNlID0gYmlnQ2F0Y2hEYXRhLmdyb3NzZVByaXNlIHx8IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIHBvaW50c1xuICAgICAgY29uc3QgcG9pbnRzID0gKG5iUHJpc2VzR2xvYmFsICogNTApICsgcG9pZHNUb3RhbEdsb2JhbDtcbiAgICAgIFxuICAgICAgLy8gQ2FsY3VsYXRlIGNvZWZmaWNpZW50U2VjdGV1clxuICAgICAgLy8gRmlyc3QsIGdldCBhbGwgY29tcGV0aXRvcnMgaW4gdGhlIHNhbWUgc2VjdG9yIHRvIGNhbGN1bGF0ZSBzZWN0b3IgdG90YWxcbiAgICAgIGNvbnN0IHNlY3RvckNvbXBldGl0b3JzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKFxuICAgICAgICBxdWVyeShjb2xsZWN0aW9uKGRiLCAnY29tcGV0aXRvcnMnKSwgd2hlcmUoJ3NlY3RvcicsICc9PScsIHNlY3RvcikpXG4gICAgICApO1xuICAgICAgXG4gICAgICBsZXQgc2VjdG9yVG90YWxOYlByaXNlcyA9IDA7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBzZWN0b3IgdG90YWwgZnJvbSBhbGwgY29tcGV0aXRvcnMgaW4gdGhpcyBzZWN0b3JcbiAgICAgIGZvciAoY29uc3Qgc2VjdG9yQ29tcERvYyBvZiBzZWN0b3JDb21wZXRpdG9yc1NuYXBzaG90LmRvY3MpIHtcbiAgICAgICAgY29uc3Qgc2VjdG9yQ29tcElkID0gc2VjdG9yQ29tcERvYy5pZDtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBob3VybHkgZW50cmllcyBmb3IgdGhpcyBzZWN0b3IgY29tcGV0aXRvclxuICAgICAgICBjb25zdCBzZWN0b3JIb3VybHlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoXG4gICAgICAgICAgcXVlcnkoY29sbGVjdGlvbihkYiwgJ2hvdXJseV9lbnRyaWVzJyksIHdoZXJlKCdjb21wZXRpdG9ySWQnLCAnPT0nLCBzZWN0b3JDb21wSWQpKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgbGV0IGNvbXBOYlByaXNlcyA9IDA7XG4gICAgICAgIHNlY3RvckhvdXJseVNuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xuICAgICAgICAgIGNvbnN0IGVudHJ5ID0gZG9jLmRhdGEoKTtcbiAgICAgICAgICBpZiAoWydsb2NrZWRfanVkZ2UnLCAnbG9ja2VkX2FkbWluJywgJ29mZmxpbmVfanVkZ2UnLCAnb2ZmbGluZV9hZG1pbiddLmluY2x1ZGVzKGVudHJ5LnN0YXR1cykpIHtcbiAgICAgICAgICAgIGNvbXBOYlByaXNlcyArPSBlbnRyeS5maXNoQ291bnQgfHwgMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc2VjdG9yVG90YWxOYlByaXNlcyArPSBjb21wTmJQcmlzZXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGF0ZSBjb2VmZmljaWVudDogKFBvaW50cyDDlyBOYiBQcmlzZXMgZ2xvYmFsKSAvIFRvdGFsIE5iIFByaXNlcyBnbG9iYWwgU2VjdGV1clxuICAgICAgbGV0IGNvZWZmaWNpZW50U2VjdGV1ciA9IDA7XG4gICAgICBpZiAoc2VjdG9yVG90YWxOYlByaXNlcyA+IDApIHtcbiAgICAgICAgY29lZmZpY2llbnRTZWN0ZXVyID0gKHBvaW50cyAqIG5iUHJpc2VzR2xvYmFsKSAvIHNlY3RvclRvdGFsTmJQcmlzZXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBjb21wZXRpdG9yIGRvY3VtZW50IHdpdGggY29lZmZpY2llbnRcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2MoZGIsICdjb21wZXRpdG9ycycsIGNvbXBldGl0b3JJZCksIHtcbiAgICAgICAgbmJQcmlzZXNHbG9iYWwsXG4gICAgICAgIHBvaWRzVG90YWxHbG9iYWwsXG4gICAgICAgIGdyb3NzZVByaXNlLFxuICAgICAgICBwb2ludHMsXG4gICAgICAgIGNvZWZmaWNpZW50U2VjdGV1cixcbiAgICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KClcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBbHNvIHJlY2FsY3VsYXRlIGNvZWZmaWNpZW50cyBmb3IgYWxsIG90aGVyIGNvbXBldGl0b3JzIGluIHRoZSBzYW1lIHNlY3RvclxuICAgICAgLy8gc2luY2UgdGhlIHNlY3RvciB0b3RhbCBoYXMgY2hhbmdlZFxuICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yIChjb25zdCBzZWN0b3JDb21wRG9jIG9mIHNlY3RvckNvbXBldGl0b3JzU25hcHNob3QuZG9jcykge1xuICAgICAgICAgICAgY29uc3Qgb3RoZXJDb21wSWQgPSBzZWN0b3JDb21wRG9jLmlkO1xuICAgICAgICAgICAgaWYgKG90aGVyQ29tcElkICE9PSBjb21wZXRpdG9ySWQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgcmVjYWxjdWxhdGVDb21wZXRpdG9yQ29lZmZpY2llbnQob3RoZXJDb21wSWQsIHNlY3Rvciwgc2VjdG9yVG90YWxOYlByaXNlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlY2FsY3VsYXRpbmcgc2VjdG9yIGNvZWZmaWNpZW50czonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDApO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGF1dG8tY2FsY3VsYXRpbmcgY29tcGV0aXRvciB0b3RhbHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gcmVjYWxjdWxhdGUgY29lZmZpY2llbnQgZm9yIGEgc3BlY2lmaWMgY29tcGV0aXRvclxuICBjb25zdCByZWNhbGN1bGF0ZUNvbXBldGl0b3JDb2VmZmljaWVudCA9IGFzeW5jIChjb21wZXRpdG9ySWQ6IHN0cmluZywgc2VjdG9yOiBzdHJpbmcsIHNlY3RvclRvdGFsTmJQcmlzZXM6IG51bWJlcikgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgY29tcGV0aXRvcidzIGN1cnJlbnQgZGF0YVxuICAgICAgY29uc3QgY29tcGV0aXRvclNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhcbiAgICAgICAgcXVlcnkoY29sbGVjdGlvbihkYiwgJ2NvbXBldGl0b3JzJyksIHdoZXJlKCdfX25hbWVfXycsICc9PScsIGNvbXBldGl0b3JJZCksIGxpbWl0KDEpKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKGNvbXBldGl0b3JTbmFwc2hvdC5lbXB0eSkgcmV0dXJuO1xuICAgICAgXG4gICAgICBjb25zdCBjb21wZXRpdG9yRGF0YSA9IGNvbXBldGl0b3JTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcbiAgICAgIGNvbnN0IHBvaW50cyA9IGNvbXBldGl0b3JEYXRhLnBvaW50cyB8fCAwO1xuICAgICAgY29uc3QgbmJQcmlzZXNHbG9iYWwgPSBjb21wZXRpdG9yRGF0YS5uYlByaXNlc0dsb2JhbCB8fCAwO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgbmV3IGNvZWZmaWNpZW50XG4gICAgICBsZXQgY29lZmZpY2llbnRTZWN0ZXVyID0gMDtcbiAgICAgIGlmIChzZWN0b3JUb3RhbE5iUHJpc2VzID4gMCkge1xuICAgICAgICBjb2VmZmljaWVudFNlY3RldXIgPSAocG9pbnRzICogbmJQcmlzZXNHbG9iYWwpIC8gc2VjdG9yVG90YWxOYlByaXNlcztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIG9ubHkgdGhlIGNvZWZmaWNpZW50XG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jKGRiLCAnY29tcGV0aXRvcnMnLCBjb21wZXRpdG9ySWQpLCB7XG4gICAgICAgIGNvZWZmaWNpZW50U2VjdGV1cixcbiAgICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KClcbiAgICAgIH0pO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHVwZGF0aW5nIGNvZWZmaWNpZW50IGZvciAke2NvbXBldGl0b3JJZH06YCwgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB2YWx1ZTogRmlyZXN0b3JlQ29udGV4dFR5cGUgPSB7XG4gICAgY29tcGV0aXRvcnMsXG4gICAgaG91cmx5RW50cmllcyxcbiAgICBiaWdDYXRjaGVzLFxuICAgIGp1ZGdlcyxcbiAgICBjb21wZXRpdGlvblNldHRpbmdzLFxuICAgIHB1YmxpY0FwcGVhcmFuY2VTZXR0aW5ncyxcbiAgICBzYXZlQ29tcGV0aXRvcixcbiAgICBkZWxldGVDb21wZXRpdG9yLFxuICAgIHNhdmVIb3VybHlFbnRyeSxcbiAgICBzYXZlQmlnQ2F0Y2gsXG4gICAgc2F2ZUp1ZGdlLFxuICAgIGRlbGV0ZUp1ZGdlLFxuICAgIHNhdmVDb21wZXRpdGlvblNldHRpbmdzLFxuICAgIHNhdmVQdWJsaWNBcHBlYXJhbmNlU2V0dGluZ3MsXG4gICAgbG9hZGluZyxcbiAgICBlcnJvclxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEZpcmVzdG9yZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3ZhbHVlfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0ZpcmVzdG9yZUNvbnRleHQuUHJvdmlkZXI+XG4gICk7XG59XG5cbi8vIEN1c3RvbSBob29rIC0gQ1JJVElDQUw6IFRoaXMgZXhwb3J0IGlzIHJlcXVpcmVkIVxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZpcmVzdG9yZSgpIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoRmlyZXN0b3JlQ29udGV4dCk7XG4gIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUZpcmVzdG9yZSBtdXN0IGJlIHVzZWQgd2l0aGluIGEgRmlyZXN0b3JlU3luY1Byb3ZpZGVyJyk7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQ7XG59XG5cbi8vIEV4cG9ydCB0aGUgY29udGV4dCBmb3IgYWR2YW5jZWQgdXNhZ2VcbmV4cG9ydCB7IEZpcmVzdG9yZUNvbnRleHQgfTsiXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiY29sbGVjdGlvbiIsIm9uU25hcHNob3QiLCJkb2MiLCJzZXREb2MiLCJkZWxldGVEb2MiLCJxdWVyeSIsIm9yZGVyQnkiLCJ3aGVyZSIsImdldERvY3MiLCJ1cGRhdGVEb2MiLCJUaW1lc3RhbXAiLCJsaW1pdCIsImRiIiwiRmlyZXN0b3JlQ29udGV4dCIsInVuZGVmaW5lZCIsIkZpcmVzdG9yZVN5bmNQcm92aWRlciIsImNoaWxkcmVuIiwiY29tcGV0aXRvcnMiLCJzZXRDb21wZXRpdG9ycyIsImhvdXJseUVudHJpZXMiLCJzZXRIb3VybHlFbnRyaWVzIiwiYmlnQ2F0Y2hlcyIsInNldEJpZ0NhdGNoZXMiLCJqdWRnZXMiLCJzZXRKdWRnZXMiLCJjb21wZXRpdGlvblNldHRpbmdzIiwic2V0Q29tcGV0aXRpb25TZXR0aW5ncyIsInB1YmxpY0FwcGVhcmFuY2VTZXR0aW5ncyIsInNldFB1YmxpY0FwcGVhcmFuY2VTZXR0aW5ncyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsInVuc3Vic2NyaWJlcnMiLCJtb3VudGVkIiwiY29tcGV0aXRvcnNRdWVyeSIsInVuc3ViQ29tcGV0aXRvcnMiLCJzbmFwc2hvdCIsImRhdGEiLCJkb2NzIiwibWFwIiwiaWQiLCJjb25zb2xlIiwibWVzc2FnZSIsInB1c2giLCJob3VybHlRdWVyeSIsInVuc3ViSG91cmx5IiwiYmlnQ2F0Y2hlc1F1ZXJ5IiwidW5zdWJCaWdDYXRjaGVzIiwianVkZ2VzUXVlcnkiLCJ1bnN1Ykp1ZGdlcyIsInVpZCIsInVuc3ViU2V0dGluZ3MiLCJleGlzdHMiLCJ1bnN1YkFwcGVhcmFuY2UiLCJlcnIiLCJFcnJvciIsImZvckVhY2giLCJ1bnN1YiIsInNhdmVDb21wZXRpdG9yIiwiZG9jUmVmIiwidXBkYXRlZEF0Iiwibm93IiwibWVyZ2UiLCJkZWxldGVDb21wZXRpdG9yIiwic2F2ZUhvdXJseUVudHJ5IiwibG9nIiwiY3JlYXRlZEF0IiwicmVjYWxjdWxhdGVDb21wZXRpdG9yVG90YWxzIiwiY29tcGV0aXRvcklkIiwic2F2ZUJpZ0NhdGNoIiwic2F2ZUp1ZGdlIiwiZGVsZXRlSnVkZ2UiLCJzYXZlQ29tcGV0aXRpb25TZXR0aW5ncyIsInNhdmVQdWJsaWNBcHBlYXJhbmNlU2V0dGluZ3MiLCJjb21wZXRpdG9yRG9jIiwiZmluZCIsImMiLCJzZWN0b3IiLCJob3VybHlFbnRyaWVzU25hcHNob3QiLCJuYlByaXNlc0dsb2JhbCIsInBvaWRzVG90YWxHbG9iYWwiLCJlbnRyeSIsImluY2x1ZGVzIiwic3RhdHVzIiwiZmlzaENvdW50IiwidG90YWxXZWlnaHQiLCJiaWdDYXRjaFNuYXBzaG90IiwiZ3Jvc3NlUHJpc2UiLCJlbXB0eSIsImJpZ0NhdGNoRGF0YSIsInBvaW50cyIsInNlY3RvckNvbXBldGl0b3JzU25hcHNob3QiLCJzZWN0b3JUb3RhbE5iUHJpc2VzIiwic2VjdG9yQ29tcERvYyIsInNlY3RvckNvbXBJZCIsInNlY3RvckhvdXJseVNuYXBzaG90IiwiY29tcE5iUHJpc2VzIiwiY29lZmZpY2llbnRTZWN0ZXVyIiwic2V0VGltZW91dCIsIm90aGVyQ29tcElkIiwicmVjYWxjdWxhdGVDb21wZXRpdG9yQ29lZmZpY2llbnQiLCJjb21wZXRpdG9yU25hcHNob3QiLCJjb21wZXRpdG9yRGF0YSIsInZhbHVlIiwiUHJvdmlkZXIiLCJ1c2VGaXJlc3RvcmUiLCJjb250ZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/providers/FirestoreSyncProvider.tsx\n"));

/***/ })

});